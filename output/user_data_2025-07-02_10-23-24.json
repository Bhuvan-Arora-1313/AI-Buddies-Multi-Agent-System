{
  "timestamp": "2025-07-02_10-23-24",
  "active_window": "ChatGPT",
  "focused_text": "Could not extract AXValue from focused element",
  "clipboard": "curl -X POST http://127.0.0.1:8000/generate \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"scenario\":\"missed class\", \"urgency\":\"panic\"}'",
  "vscode_text": "# excuse_api.py\nimport os, json, time, hashlib\nfrom pathlib import Path\nfrom dotenv import load_dotenv\nload_dotenv()          # \u2190 NEW: pulls OPENAI_API_KEY from .env\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\n\nimport google.generativeai as genai\ngenai.configure(api_key=os.getenv(\"GEMINI_KEY\"))\nmodel = genai.GenerativeModel(\"gemini-pro\")\n# ---------- simple \u201cDB\u201d ----------\nDATA = Path(\"history.json\")\nif not DATA.exists():\n    DATA.write_text(\"[]\")          # seed empty list\n\n\n\n# ---------- FastAPI app ----------\napp = FastAPI()\n\nclass Req(BaseModel):\n    scenario: str  # e.g. \"missed class\"\n    urgency: str   # \"low\" | \"medium\" | \"panic\"\n\nSYSTEM_PROMPT = \"\"\"\nYou are an elite alibi-creator.\nReturn a JSON with:\n  excuse               (\u2264 50 words),\n  believability_score  (0-1),\n  chat_log             (short WhatsApp-style proof)\n\"\"\"\n\n# ---------- /generate ----------\n@app.post(\"/generate\")\ndef generate(r: Req):\n    prompt = f\"Scenario: {r.scenario}\\nUrgency: {r.urgency}\"\n    full_prompt = f\"{SYSTEM_PROMPT}\\n{prompt}\"\n    out = json.loads(model.generate_content(full_prompt).text)\n    entry = {\n        \"id\": hashlib.md5(out[\"excuse\"].encode()).hexdigest(),\n        \"ts\": time.time(),\n        **out,\n    }\n\n    history = json.loads(DATA.read_text())\n    if entry[\"id\"] not in {h[\"id\"] for h in history}:   # de-dupe\n        history.append(entry)\n        DATA.write_text(json.dumps(history, indent=2))\n\n    return entry\n\n# ---------- /top?n=5 ----------\n@app.get(\"/top\")\ndef top(n: int = 5):\n    history = json.loads(DATA.read_text())\n    history.sort(key=lambda x: x[\"believability_score\"], reverse=True)\n    return history[:n]",
  "ocr_text": "Ow \u00ae 0\n\nChatGPT File Edit View\n\n= List of research\n\nC2 GA\n\nEXPLORER\n\n| \\Y EXCUSE-GENERATOR\n\nP > __pycache__\nVv wenv\n\n> bin\nae\n\n> include\n> lib\n\u00a9 pyvenv.cfg U\n\u00a9 .env U\nES @ excuse_api.py 4,U\nU\nU\n\n{} history.json\nA = requirements.txt\n\n@\n$03 > OUTLINE\n\n> TIMELINE\n\nGE & maine @0A4\n\nWindow\n\nHelp\n\n* Artificial Intellige CO NLP_1.ipynb - Cc CO NLP_1.ipynb - Cc ca LAUNCHED Glok \u2122 Launched - Artif Artificial_Intelligenc\n\nO 8 =\n\naistudio.google.com/apikey\n\n< P excuse-generator By bOW dO\nJ Welcome \u00ae excuse_api.py 4,U X %.env U Py YO -\n\u00ae excuse_api.py > \u00a9 generate\n33\n34 # -\u2014--------\u2014- /generate \u2014-------\u2014-\n\n35 @app.post(\"/generate\")\n36 def generate(r: Req):\n\n37 prompt = f\"Scenario: {r.scenario}\\nUrgency: {r.urgency}\"\n38 full_prompt = f\"{SYSTEM_PROMPT}\\n{prompt}\"\n39 out = json. loads(model.generate_content(full_prompt) .text)\nan a cr\nPROBLEMS @ OUTPUT DEBUG CONSOLE TERMINAL PORTS +yv we NX\nFile \"/Users/bhuvanarora/excuse-generator/excuse_api.py\", line 39, in generate r zlpyinong-1\nout = json. loads(model.generate_content(full_prompt) .text) ae zsh\n\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/generativeai/generative_models\n-py\", line 331, in generate_content\nresponse = self._client.generate_content(\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/goog le/ai/generat ivelanguage_vibeta/s ,\nervices/generative_service/client.py\", line 835, in generate_content\nresponse = rpc(\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/api_core/gapic_v1/method. py\",\nline 131, in __call__\nreturn wrapped_func(xargs, **kwargs) L\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py\"\n, line 294, in retry_wrapped_func\nreturn retry_target(\nFile \"/Users/bhuvanarora/excuse-generator/.venv/1ib/python3.11/site-packages/google/api_core/retry/retry_unary.py\" |\n, line 156, in retry_target by\nnext_sleep = _retry_error_helper( i\nFile \"/Users/bhuvanarora/excuse-generator/.venv/1ib/python3.11/site-packages/google/api_core/retry/retry_base. py\",\nline 214, in _retry_error_helper\nraise final_exc from source_exc\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py\"\n, line 147, in retry_target 1\nresult = target()\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/api_core/timeout.py\", line 130\n, in func_with_timeout\nreturn func(*args, +kkwargs)\nFile \"/Users/bhuvanarora/excuse-generator/.venv/lib/python3.11/site-packages/google/api_core/grpc_helpers.py\", lin\ne 78, in error_remapped_callable\nraise exceptions. from_grpc_error(exc) from exc\ngoogle.api_core.exceptions.NotFound: 404 models/gemini-pro is not found for API version vibeta, or is not supported\nfor generateContent. Call ListModels to see the list of available models and their supported methods\n\n0\n\nfile.pdf\n\nQ  n39,Col63 Spaces:4 UTF-8 LF {} Python & 3.13.264-bit (\n\nJETIR2101184 Iko to MTJ (1).pdf\n\nITRV (1).pdf ITRV.pdf Iko to MTJ-\n\nIko to mtj\n\n\u00a9 &8 CBO S wzwwOD F Q S \u00a9 WedJul2 10:23AM\n\nS | 6 [) 90 Get API key |G X\ni \u2014\neee OG Intelligent Excuse Generator Plan >\n\nBhuvan\n\nThought for 13 seconds >\nWhat the traceback is saying\n\n\u00a9) Copy\n\ngoogle.api_core.exceptions.NotFound: 404 ...\ngemini-pro is not found for API version vibeta, or is not supported in ge\n\nThe Google Generative Al SDK you're calling is still hitting the old \u201cv1beta\" endpoint, where the\nmodel list looked like\nmodels/gemini-pro (note the full path).\n\nThat happens when:\n1. An older SDK (< 0.3) is installed, or\n\n2. You pass just \"gemini-pro\" while the old client expects \"models/gemini-pro\".\n\n\u2019\\ Fix in two quick steps\n\n1 Upgrade the SDK so it speaks the new v1 APi v\n\n\u20ac Work with Code Tab x\n\nMessage Bhuvan\n\n+ @\u00ae ov\n\ni\n\nS800eEGE80 \u00a98210 &*"
}